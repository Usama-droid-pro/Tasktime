{"ast":null,"code":"// Backend API format for task log creation\n\n/**\n * Validates that total hours match the sum of individual task hours\n */\nexport const validateTotalHours = (totalHours, tasks) => {\n  const errors = [];\n  const total = parseFloat(totalHours) || 0;\n  const taskHoursSum = tasks.reduce((sum, task) => {\n    const hours = parseFloat(task.hours) || 0;\n    return sum + hours;\n  }, 0);\n\n  // Allow small floating point differences (0.01 hours = 36 seconds)\n  const difference = Math.abs(total - taskHoursSum);\n  if (difference > 0.01) {\n    errors.push(`Total hours (${total}) must match sum of task hours (${taskHoursSum})`);\n  }\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Validates form fields for required data and proper formats\n */\nexport const validateFormFields = form => {\n  const errors = [];\n\n  // Validate date\n  if (!form.date) {\n    errors.push('Date is required');\n  }\n\n  // Validate total hours\n  const totalHours = parseFloat(form.totalHours);\n  if (!form.totalHours || isNaN(totalHours) || totalHours <= 0) {\n    errors.push('Total hours must be a positive number');\n  }\n  if (totalHours > 24) {\n    errors.push('Total hours cannot exceed 24 hours per day');\n  }\n\n  // Validate tasks\n  if (form.tasks.length === 0) {\n    errors.push('At least one task is required');\n  }\n  form.tasks.forEach((task, index) => {\n    if (!task.projectId) {\n      errors.push(`Task ${index + 1}: Project is required`);\n    }\n    if (!task.description.trim()) {\n      errors.push(`Task ${index + 1}: Description is required`);\n    }\n    const hours = parseFloat(task.hours);\n    if (!task.hours || isNaN(hours) || hours <= 0) {\n      errors.push(`Task ${index + 1}: Hours must be a positive number`);\n    }\n    if (hours > 24) {\n      errors.push(`Task ${index + 1}: Hours cannot exceed 24 hours`);\n    }\n  });\n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Transforms form data to API format for creating task log\n */\nexport const transformFormToTaskLog = (form, employeeId, projects) => {\n  const tasks = form.tasks.map(task => {\n    const hours = parseFloat(task.hours);\n    // Find project name by ID\n    const project = projects.find(p => p.id === task.projectId);\n    const projectName = (project === null || project === void 0 ? void 0 : project.name) || `Project ${task.projectId}`;\n    return {\n      project_name: projectName,\n      description: task.description.trim(),\n      hours: hours\n    };\n  });\n  return {\n    userId: employeeId,\n    date: form.date,\n    totalHours: parseFloat(form.totalHours),\n    tasks: tasks\n  };\n};\n\n/**\n * Validates the complete form including field validation and total hours validation\n */\nexport const validateCompleteForm = form => {\n  const fieldValidation = validateFormFields(form);\n  if (!fieldValidation.isValid) {\n    return fieldValidation;\n  }\n  const totalHoursValidation = validateTotalHours(form.totalHours, form.tasks);\n  return {\n    isValid: fieldValidation.isValid && totalHoursValidation.isValid,\n    errors: [...fieldValidation.errors, ...totalHoursValidation.errors]\n  };\n};","map":{"version":3,"names":["validateTotalHours","totalHours","tasks","errors","total","parseFloat","taskHoursSum","reduce","sum","task","hours","difference","Math","abs","push","isValid","length","validateFormFields","form","date","isNaN","forEach","index","projectId","description","trim","transformFormToTaskLog","employeeId","projects","map","project","find","p","id","projectName","name","project_name","userId","validateCompleteForm","fieldValidation","totalHoursValidation"],"sources":["/Users/obs-fa/Downloads/Front End/src/utils/timesheet.utils.ts"],"sourcesContent":["// Backend API format for task log creation\ninterface TaskLogCreateRequest {\n  userId: string;\n  date: string;\n  totalHours: number;\n  tasks: Array<{\n    project_name: string;\n    description: string;\n    hours: number;\n  }>;\n}\n\nexport interface TaskEntry {\n  id: string;\n  projectId: string;\n  description: string;\n  hours: string;\n}\n\nexport interface DailyLogForm {\n  date: string;\n  totalHours: string;\n  tasks: TaskEntry[];\n}\n\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n}\n\n/**\n * Validates that total hours match the sum of individual task hours\n */\nexport const validateTotalHours = (totalHours: string, tasks: TaskEntry[]): ValidationResult => {\n  const errors: string[] = [];\n  \n  const total = parseFloat(totalHours) || 0;\n  const taskHoursSum = tasks.reduce((sum, task) => {\n    const hours = parseFloat(task.hours) || 0;\n    return sum + hours;\n  }, 0);\n  \n  // Allow small floating point differences (0.01 hours = 36 seconds)\n  const difference = Math.abs(total - taskHoursSum);\n  \n  if (difference > 0.01) {\n    errors.push(`Total hours (${total}) must match sum of task hours (${taskHoursSum})`);\n  }\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Validates form fields for required data and proper formats\n */\nexport const validateFormFields = (form: DailyLogForm): ValidationResult => {\n  const errors: string[] = [];\n  \n  // Validate date\n  if (!form.date) {\n    errors.push('Date is required');\n  }\n  \n  // Validate total hours\n  const totalHours = parseFloat(form.totalHours);\n  if (!form.totalHours || isNaN(totalHours) || totalHours <= 0) {\n    errors.push('Total hours must be a positive number');\n  }\n  \n  if (totalHours > 24) {\n    errors.push('Total hours cannot exceed 24 hours per day');\n  }\n  \n  // Validate tasks\n  if (form.tasks.length === 0) {\n    errors.push('At least one task is required');\n  }\n  \n  form.tasks.forEach((task, index) => {\n    if (!task.projectId) {\n      errors.push(`Task ${index + 1}: Project is required`);\n    }\n    \n    if (!task.description.trim()) {\n      errors.push(`Task ${index + 1}: Description is required`);\n    }\n    \n    const hours = parseFloat(task.hours);\n    if (!task.hours || isNaN(hours) || hours <= 0) {\n      errors.push(`Task ${index + 1}: Hours must be a positive number`);\n    }\n    \n    if (hours > 24) {\n      errors.push(`Task ${index + 1}: Hours cannot exceed 24 hours`);\n    }\n  });\n  \n  return {\n    isValid: errors.length === 0,\n    errors\n  };\n};\n\n/**\n * Transforms form data to API format for creating task log\n */\nexport const transformFormToTaskLog = (\n  form: DailyLogForm, \n  employeeId: string,\n  projects: Array<{ id: string; name: string }>\n): TaskLogCreateRequest => {\n  const tasks = form.tasks.map(task => {\n    const hours = parseFloat(task.hours);\n    // Find project name by ID\n    const project = projects.find(p => p.id === task.projectId);\n    const projectName = project?.name || `Project ${task.projectId}`;\n    \n    return {\n      project_name: projectName,\n      description: task.description.trim(),\n      hours: hours\n    };\n  });\n\n  return {\n    userId: employeeId,\n    date: form.date,\n    totalHours: parseFloat(form.totalHours),\n    tasks: tasks\n  };\n};\n\n/**\n * Validates the complete form including field validation and total hours validation\n */\nexport const validateCompleteForm = (form: DailyLogForm): ValidationResult => {\n  const fieldValidation = validateFormFields(form);\n  \n  if (!fieldValidation.isValid) {\n    return fieldValidation;\n  }\n  \n  const totalHoursValidation = validateTotalHours(form.totalHours, form.tasks);\n  \n  return {\n    isValid: fieldValidation.isValid && totalHoursValidation.isValid,\n    errors: [...fieldValidation.errors, ...totalHoursValidation.errors]\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}